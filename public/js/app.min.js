function email_test(input){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(input.value)}let sublist=document.querySelectorAll(".sublist");sublist.forEach(list=>{document.addEventListener("click",e=>{let target,sub;e.target.closest(".sublist")?(list.classList.contains("_active")?_slideUp(list.querySelector(".sublist__body"),200):_slideDown(list.querySelector(".sublist__body"),200),list.classList.toggle("_active")):list.classList.contains("_active")&&(_slideUp(list.querySelector(".sublist__body"),200),list.classList.remove("_active"))}),document.addEventListener("keydown",(function(e){"Escape"===e.code&&(_slideUp(list.querySelector(".sublist__body"),200),list.classList.remove("_active"))}))});let searchForm=document.querySelector(".header__form-search"),searchInput=document.querySelector(".header__search-input"),searchBtnBack=document.querySelector(".header__form-search-btn_back"),searchBtnClear=document.querySelector(".header__form-search-btn_clear"),searchBtnSubmit=document.querySelector(".header__form-search-btn_submit"),searchOverlay=document.querySelector(".header__form-search-overlay"),searchMobBnt=document.querySelector(".header__search-btn-mob");searchForm&&(searchInput.addEventListener("click",e=>{searchForm.classList.add("_active"),searchInput.classList.add("_active"),searchOverlay.classList.add("_active"),unlock&&body_lock_add(100)}),searchBtnClear.addEventListener("click",e=>{e.preventDefault(),searchInput.value="",searchInput.focus()}),document.addEventListener("click",e=>{let target=e.target;target!=searchBtnBack&&target!=searchOverlay||(searchForm.classList.remove("_active"),searchInput.classList.remove("_active"),searchOverlay.classList.remove("_active"),unlock&&body_lock(100))})),searchMobBnt&&searchMobBnt.addEventListener("click",()=>{searchForm.classList.add("_active"),searchInput.classList.add("_active"),searchInput.focus(),searchInput.select(),searchOverlay.classList.add("_active"),unlock&&body_lock(100)});let formMessageDone=document.querySelector(".message_done"),formMessageError=document.querySelector(".message_error"),formBtnComment=document.querySelector(".game-comments__form .button"),formInputComment=document.querySelector(".game-comments__form-input"),formMessageClose=document.querySelectorAll(".message .close");formInputComment&&(formBtnComment.addEventListener("click",()=>{let dataValue=formInputComment.getAttribute("data-value");""==formInputComment.value?(setTimeout((function(){formMessageDone.style.opacity="1",formMessageDone.style.visibility="visible"}),300),setTimeout((function(){formMessageError.style.opacity="0",formMessageError.style.visibility="hidden",formMessageDone.style.opacity="0",formMessageDone.style.visibility="hidden"}),5e3)):(setTimeout((function(){formMessageError.style.opacity="1",formMessageError.style.visibility="visible"}),300),setTimeout((function(){formMessageError.style.opacity="0",formMessageError.style.visibility="hidden",formMessageDone.style.opacity="0",formMessageDone.style.visibility="hidden"}),5e3))}),formMessageClose.forEach(item=>{item.addEventListener("click",()=>{setTimeout((function(){item.parentNode.style.opacity="0",item.parentNode.style.visibility="hidden"}),300)})}));let langs=document.querySelector(".langs"),langsList=document.querySelector(".langs-list");langs&&langs.addEventListener("click",(function(){this.classList.contains("_active")?_slideUp(langsList,200):_slideDown(langsList,200),this.classList.toggle("_active")}));let categoriesSortItems=document.querySelectorAll(".b-categories__sort-item");categoriesSortItems.forEach(item=>{item.addEventListener("mouseenter",(function(){item.classList.contains("_active")||(item.style="background-color: #C5C5C5;",item.parentNode.style="background-color: #fff;")})),item.addEventListener("mouseleave",(function(){item.classList.contains("_active")||(item.style="background-color: transparent"),item.parentNode.style="background-color: #dcdcdc;"}))});let actionBtns=document.querySelectorAll(".b-game__actions-item._popup-link");actionBtns.forEach(item=>{item.addEventListener("click",()=>{let popup=document.querySelector(".popup_review");setTimeout(()=>{popup.querySelector(".input").focus(),popup.querySelector(".input").select()},250)})});let feedbackLink=document.querySelectorAll('a[href="#feedback"]');function findVideos(){let videos=document.querySelectorAll(".video");for(let i=0;i<videos.length;i++)setupVideo(videos[i])}function setupVideo(video){let link=video.querySelector(".video__link"),media=video.querySelector(".video__media"),button=video.querySelector(".video__button"),id=parseMediaURL(media);video.addEventListener("click",()=>{let iframe=createIframe(id);link.remove(),button.remove(),video.appendChild(iframe)}),link.removeAttribute("href"),video.classList.add("video--enabled")}function parseMediaURL(media){let regexp=/https:\/\/i\.ytimg\.com\/vi\/([a-zA-Z0-9_-]+)\/maxresdefault\.jpg/i,url,match;return media.src.match(regexp)[1]}function createIframe(id){let iframe=document.createElement("iframe");return iframe.setAttribute("allowfullscreen",""),iframe.setAttribute("allow","autoplay"),iframe.setAttribute("src",generateURL(id)),iframe.classList.add("video__media"),iframe}function generateURL(id){let query;return"https://www.youtube.com/embed/"+id+"?rel=0&showinfo=0&autoplay=1"}feedbackLink.forEach(item=>{item.addEventListener("click",()=>{let popup=document.querySelector(".popup_feedback");setTimeout(()=>{popup.querySelector(".input").focus(),popup.querySelector(".input").select()},250)})}),findVideos();var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE "),isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};function isIE(){var is_ie;return(ua=navigator.userAgent).indexOf("MSIE ")>-1||ua.indexOf("Trident/")>-1}function testWebP(callback){var webP=new Image;webP.onload=webP.onerror=function(){callback(2==webP.height)},webP.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function ibg(){if(isIE()){let ibg=document.querySelectorAll("._ibg");for(var i=0;i<ibg.length;i++)ibg[i].querySelector("img")&&null!=ibg[i].querySelector("img").getAttribute("src")&&(ibg[i].style.backgroundImage="url("+ibg[i].querySelector("img").getAttribute("src")+")")}}isIE()&&document.querySelector("body").classList.add("ie"),isMobile.any()&&document.querySelector("body").classList.add("_touch"),testWebP((function(support){1==support?document.querySelector("body").classList.add("_webp"):document.querySelector("body").classList.add("_no-webp")})),ibg(),document.querySelector(".wrapper")&&document.querySelector(".wrapper").classList.add("_loaded");let unlock=!0;if(location.hash){const hsh=location.hash.replace("#","");document.querySelector(".popup_"+hsh)?popup_open(hsh):document.querySelector("div."+hsh)&&_goto(document.querySelector("."+hsh),500,"")}let iconMenu=document.querySelector(".icon-menu"),iconMenuClose=document.querySelector(".menu__close"),overlayMenu=document.querySelector(".menu__overlay");if(null!=iconMenu){let delay=500,menu=document.querySelector(".menu");iconMenu.addEventListener("click",(function(e){unlock&&(body_lock(delay),menu.classList.toggle("_active"))})),iconMenuClose.addEventListener("click",(function(){unlock&&(body_lock(delay),menu.classList.remove("_active"),menu_close())})),overlayMenu.addEventListener("click",(function(){unlock&&(body_lock(delay),menu.classList.remove("_active"),menu_close())}))}function menu_close(){let iconMenu=document.querySelector(".icon-menu"),menu;document.querySelector(".menu").classList.remove("_active")}function body_lock(delay){let body;document.querySelector("body").classList.contains("_lock")?body_lock_remove(delay):body_lock_add(delay)}function body_lock_remove(delay){let body=document.querySelector("body");if(unlock){let lock_padding=document.querySelectorAll("._lp");setTimeout(()=>{for(let index=0;index<lock_padding.length;index++){const el=lock_padding[index];el.style.paddingRight="0px"}body.style.paddingRight="0px",body.classList.remove("_lock")},delay),unlock=!1,setTimeout((function(){unlock=!0}),delay)}}function body_lock_add(delay){let body=document.querySelector("body");if(unlock){let lock_padding=document.querySelectorAll("._lp");for(let index=0;index<lock_padding.length;index++){const el=lock_padding[index];el.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}body.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",body.classList.add("_lock"),unlock=!1,setTimeout((function(){unlock=!0}),delay)}}let title=document.querySelectorAll("._letter-animation");if(title)for(let index=0;index<title.length;index++){let el=title[index],txt,txt_words=el.innerHTML.replace("  "," ").split(" "),new_title="";for(let index=0;index<txt_words.length;index++){let txt_word=txt_words[index],len=txt_word.length;new_title+="<p>";for(let index=0;index<len;index++){let it=txt_word.substr(index,1);" "==it&&(it="&nbsp;"),new_title=new_title+"<span>"+it+"</span>"}el.innerHTML=new_title,new_title+="&nbsp;</p>"}}let tabs=document.querySelectorAll("._tabs");for(let index=0;index<tabs.length;index++){let tab=tabs[index],tabs_items=tab.querySelectorAll("._tabs-item"),tabs_blocks=tab.querySelectorAll("._tabs-block");for(let index=0;index<tabs_items.length;index++){let tabs_item=tabs_items[index];tabs_item.addEventListener("click",(function(e){for(let index=0;index<tabs_items.length;index++){let tabs_item;tabs_items[index].classList.remove("_active"),tabs_blocks[index].classList.remove("_active")}tabs_item.classList.add("_active"),tabs_blocks[index].classList.add("_active"),e.preventDefault()}))}}let spollers=document.querySelectorAll("._spoller"),spollersGo=!0;if(spollers.length>0)for(let index=0;index<spollers.length;index++){const spoller=spollers[index];spoller.addEventListener("click",(function(e){if(spollersGo){if(spollersGo=!1,spoller.classList.contains("_spoller-992")&&window.innerWidth>992)return!1;if(spoller.classList.contains("_spoller-768")&&window.innerWidth>768)return!1;if(spoller.closest("._spollers").classList.contains("_one")){let curent_spollers=spoller.closest("._spollers").querySelectorAll("._spoller");for(let i=0;i<curent_spollers.length;i++){let el=curent_spollers[i];el!=spoller&&(el.classList.remove("_active"),_slideUp(el.nextElementSibling))}}spoller.classList.toggle("_active"),_slideToggle(spoller.nextElementSibling),setTimeout((function(){spollersGo=!0}),500)}}))}let gallery=document.querySelectorAll("._gallery");function gallery_init(){for(let index=0;index<gallery.length;index++){const el=gallery[index];lightGallery(el,{counter:!1,selector:"a",download:!1})}}function search_in_list(input){let ul,li=input.parentNode.querySelector("ul").querySelectorAll("li"),filter=input.value.toUpperCase();for(i=0;i<li.length;i++){let el=li[i],item=el;txtValue=item.textContent||item.innerText,txtValue.toUpperCase().indexOf(filter)>-1?el.style.display="":el.style.display="none"}}function digi(str){var r;return str.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}function digi_animate(digi_animate){if(digi_animate.length>0)for(let index=0;index<digi_animate.length;index++){const el=digi_animate[index],el_to=parseInt(el.innerHTML.replace(" ",""));el.classList.contains("_done")||digi_animate_value(el,0,el_to,1500)}}function digi_animate_value(el,start,end,duration){var obj=el,range=end-start,minTimer=50,stepTime=Math.abs(Math.floor(duration/range));stepTime=Math.max(stepTime,50);var startTime,endTime=(new Date).getTime()+duration,timer;function run(){var now=(new Date).getTime(),remaining=Math.max((endTime-now)/duration,0),value=Math.round(end-remaining*range);obj.innerHTML=digi(value),value==end&&clearInterval(timer)}timer=setInterval(run,stepTime),run(),el.classList.add("_done")}gallery&&gallery_init();let popup_link=document.querySelectorAll("._popup-link"),popups=document.querySelectorAll(".popup");for(let index=0;index<popup_link.length;index++){const el=popup_link[index];el.addEventListener("click",(function(e){if(unlock){let item,video;popup_open(el.getAttribute("href").replace("#",""),el.getAttribute("data-video"))}e.preventDefault()}))}for(let index=0;index<popups.length;index++){const popup=popups[index];popup.addEventListener("click",(function(e){e.target.closest(".popup__body")||popup_close(e.target.closest(".popup"))}))}function popup_open(item,video=""){let activePopup;document.querySelectorAll(".popup._active").length>0&&popup_close("",!1);let curent_popup=document.querySelector(".popup_"+item);if(curent_popup&&unlock){if(""!=video&&null!=video){let popup_video;document.querySelector(".popup_video").querySelector(".popup__video").innerHTML='<iframe src="https://www.youtube.com/embed/'+video+'?autoplay=1"  allow="autoplay; encrypted-media" allowfullscreen></iframe>'}curent_popup.classList.add("_active"),history.pushState("","","#"+item)}}function popup_close(item,bodyUnlock=!0){if(unlock){if(item){let video=item.querySelector(".popup__video");video&&(video.innerHTML=""),item.classList.remove("_active")}else for(let index=0;index<popups.length;index++){const popup=popups[index];let video=popup.querySelector(".popup__video");video&&(video.innerHTML=""),popup.classList.remove("_active")}!document.querySelector(".menu__body._active")&&bodyUnlock&&body_lock_remove(500),history.pushState("","",window.location.href.split("#")[0])}}let popup_close_icon=document.querySelectorAll(".popup__close,._popup-close");if(popup_close_icon)for(let index=0;index<popup_close_icon.length;index++){const el=popup_close_icon[index];el.addEventListener("click",(function(){popup_close(el.closest(".popup"))}))}document.addEventListener("keydown",(function(e){"Escape"===e.code&&popup_close()}));let _slideUp=(target,duration=500)=>{target.style.transitionProperty="height, margin, padding",target.style.transitionDuration=duration+"ms",target.style.height=target.offsetHeight+"px",target.offsetHeight,target.style.overflow="hidden",target.style.height=0,target.style.paddingTop=0,target.style.paddingBottom=0,target.style.marginTop=0,target.style.marginBottom=0,window.setTimeout(()=>{target.style.display="none",target.style.removeProperty("height"),target.style.removeProperty("padding-top"),target.style.removeProperty("padding-bottom"),target.style.removeProperty("margin-top"),target.style.removeProperty("margin-bottom"),target.style.removeProperty("overflow"),target.style.removeProperty("transition-duration"),target.style.removeProperty("transition-property"),target.classList.remove("_slide")},duration)},_slideDown=(target,duration=500)=>{target.style.removeProperty("display");let display=window.getComputedStyle(target).display;"none"===display&&(display="block"),target.style.display=display;let height=target.offsetHeight;target.style.overflow="hidden",target.style.height=0,target.style.paddingTop=0,target.style.paddingBottom=0,target.style.marginTop=0,target.style.marginBottom=0,target.offsetHeight,target.style.transitionProperty="height, margin, padding",target.style.transitionDuration=duration+"ms",target.style.height=height+"px",target.style.removeProperty("padding-top"),target.style.removeProperty("padding-bottom"),target.style.removeProperty("margin-top"),target.style.removeProperty("margin-bottom"),window.setTimeout(()=>{target.style.removeProperty("height"),target.style.removeProperty("overflow"),target.style.removeProperty("transition-duration"),target.style.removeProperty("transition-property"),target.classList.remove("_slide")},duration)},_slideToggle=(target,duration=500)=>{if(!target.classList.contains("_slide"))return target.classList.add("_slide"),"none"===window.getComputedStyle(target).display?_slideDown(target,duration):_slideUp(target,duration)};function _wrap(el,wrapper){el.parentNode.insertBefore(wrapper,el),wrapper.appendChild(el)}function _removeClasses(el,class_name){for(var i=0;i<el.length;i++)el[i].classList.remove(class_name)}function _is_hidden(el){return null===el.offsetParent}function animate({timing:timing,draw:draw,duration:duration}){let start=performance.now();requestAnimationFrame((function animate(time){let timeFraction=(time-start)/duration;timeFraction>1&&(timeFraction=1);let progress=timing(timeFraction);draw(progress),timeFraction<1&&requestAnimationFrame(animate)}))}function makeEaseOut(timing){return function(timeFraction){return 1-timing(1-timeFraction)}}function makeEaseInOut(timing){return function(timeFraction){return timeFraction<.5?timing(2*timeFraction)/2:(2-timing(2*(1-timeFraction)))/2}}function quad(timeFraction){return Math.pow(timeFraction,2)}function circ(timeFraction){return 1-Math.sin(Math.acos(timeFraction))}Element.prototype.closest||(Element.prototype.closest=function(css){for(var node=this;node;){if(node.matches(css))return node;node=node.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);let forms=document.querySelectorAll("form");if(forms.length>0)for(let index=0;index<forms.length;index++){const el=forms[index];el.addEventListener("submit",form_submit)}async function form_submit(e){let btn,form=e.target.closest("form"),error;if(0==form_validate(form)){let formAction=form.getAttribute("action")?form.getAttribute("action").trim():"#",formMethod=form.getAttribute("method")?form.getAttribute("method").trim():"GET";const message=form.getAttribute("data-message"),ajax=form.getAttribute("data-ajax");if(ajax){e.preventDefault();let formData=new FormData(form);form.classList.add("_sending");let response=await fetch(formAction,{method:formMethod,body:formData});if(response.ok){let result=await response.json();form.classList.remove("_sending"),message&&popup_open("_"+message+"-message"),form_clean(form)}else alert("Ошибка"),form.classList.remove("_sending")}}else{let form_error=form.querySelectorAll("._error");form_error&&form.classList.contains("_goto-error")&&_goto(form_error[0],1e3,50),e.preventDefault()}}function form_validate(form){let error=0,form_req=form.querySelectorAll("._req");if(form_req.length>0)for(let index=0;index<form_req.length;index++){const el=form_req[index];_is_hidden(el)||(error+=form_validate_input(el))}return error}function form_validate_input(input){let error=0,input_g_value=input.getAttribute("data-value");if("email"==input.getAttribute("name")||input.classList.contains("_email")){if(input.value!=input_g_value){let em=input.value.replace(" ","");input.value=em}email_test(input)||input.value==input_g_value?(form_add_error(input),error++):form_remove_error(input)}else"checkbox"==input.getAttribute("type")&&0==input.checked?(form_add_error(input),error++):""==input.value||input.value==input_g_value?(form_add_error(input),error++):form_remove_error(input);return error}function form_add_error(input){input.classList.add("_error"),input.parentElement.classList.add("_error");let input_error=input.parentElement.querySelector(".form__error");input_error&&input.parentElement.removeChild(input_error);let input_error_text=input.getAttribute("data-error");input_error_text&&""!=input_error_text&&input.parentElement.insertAdjacentHTML("beforeend",'<div class="form__error">'+input_error_text+"</div>")}function form_remove_error(input){input.classList.remove("_error"),input.parentElement.classList.remove("_error");let input_error=input.parentElement.querySelector(".form__error");input_error&&input.parentElement.removeChild(input_error)}function form_clean(form){let inputs=form.querySelectorAll("input,textarea");for(let index=0;index<inputs.length;index++){const el=inputs[index];el.parentElement.classList.remove("_focus"),el.classList.remove("_focus"),el.value=el.getAttribute("data-value")}let checkboxes=form.querySelectorAll(".checkbox__input");if(checkboxes.length>0)for(let index=0;index<checkboxes.length;index++){const checkbox=checkboxes[index];checkbox.checked=!1}let selects=form.querySelectorAll("select");if(selects.length>0)for(let index=0;index<selects.length;index++){const select=selects[index],select_default_value=select.getAttribute("data-default");select.value=select_default_value,select_item(select)}}let viewPass=document.querySelectorAll(".form__viewpass");for(let index=0;index<viewPass.length;index++){const element=viewPass[index];element.addEventListener("click",(function(e){element.classList.contains("_active")?element.parentElement.querySelector("input").setAttribute("type","password"):element.parentElement.querySelector("input").setAttribute("type","text"),element.classList.toggle("_active")}))}let selects=document.getElementsByTagName("select");function selects_init(){for(let index=0;index<selects.length;index++){const select=selects[index];select_init(select)}document.addEventListener("click",(function(e){selects_close(e)})),document.addEventListener("keydown",(function(e){"Escape"===e.code&&selects_close(e)}))}function selects_close(e){const selects=document.querySelectorAll(".select");if(!e.target.closest(".select"))for(let index=0;index<selects.length;index++){const select=selects[index],select_body_options=select.querySelector(".select__options");select.classList.remove("_active"),_slideUp(select_body_options,250)}}function select_init(select){const select_parent=select.parentElement,select_modifikator=select.getAttribute("class"),select_selected_option=select.querySelector("option:checked");let new_select;select.setAttribute("data-default",select_selected_option.value),select.style.display="none",select_parent.insertAdjacentHTML("beforeend",'<div class="select select_'+select_modifikator+'"></div>'),select.parentElement.querySelector(".select").appendChild(select),select_item(select)}function select_item(select){const select_parent=select.parentElement,select_items=select_parent.querySelector(".select__item"),select_options=select.querySelectorAll("option"),select_selected_option=select.querySelector("option:checked"),select_selected_text=select_selected_option.value,select_type=select.getAttribute("data-type");select_items&&select_items.remove();let select_type_content="";select_type_content="input"==select_type?'<div class="select__value icon-select-arrow"><input autocomplete="off" type="text" name="form[]" value="'+select_selected_text+'" data-error="Ошибка" data-value="'+select_selected_text+'" class="select__input"></div>':'<div class="select__value icon-select-arrow"><span>'+select_selected_text+"</span></div>",select_parent.insertAdjacentHTML("beforeend",'<div class="select__item"><div class="select__title">'+select_type_content+'</div><div class="select__options">'+select_get_options(select_options)+"</div></div></div>"),select_actions(select,select_parent)}function select_actions(original,select){const select_item=select.querySelector(".select__item"),select_body_options=select.querySelector(".select__options"),select_options=select.querySelectorAll(".select__option"),select_type=original.getAttribute("data-type"),select_input=select.querySelector(".select__input");select_item.addEventListener("click",(function(){let selects=document.querySelectorAll(".select");for(let index=0;index<selects.length;index++){const select=selects[index],select_body_options=select.querySelector(".select__options");select!=select_item.closest(".select")&&(select.classList.remove("_active"),_slideUp(select_body_options,250))}_slideToggle(select_body_options,250),select.classList.toggle("_active")}));for(let index=0;index<select_options.length;index++){const select_option=select_options[index],select_option_value=select_option.getAttribute("data-value"),select_option_text=select_option.innerHTML;"input"==select_type?select_input.addEventListener("keyup",select_search):select_option.getAttribute("data-value")==original.value&&(select_option.style.display="none"),select_option.addEventListener("click",(function(){for(let index=0;index<select_options.length;index++){const el=select_options[index];el.style.display="block"}"input"==select_type?(select_input.value=select_option_text,original.value=select_option_value):(select.querySelector(".select__value").innerHTML="<span>"+select_option_value+"</span>",original.value=select_option_value,select_option.style.display="none")}))}}function select_get_options(select_options){if(select_options){let select_options_content="";for(let index=0;index<select_options.length;index++){const select_option=select_options[index],select_option_value=select_option.value;if(""!=select_option_value){const select_option_text=select_option.text;select_options_content=select_options_content+'<div data-value="'+select_option_value+'" class="select__option">'+select_option_text+"</div>"}}return select_options_content}}function select_search(e){let select_block=e.target.closest(".select ").querySelector(".select__options"),select_options=e.target.closest(".select ").querySelectorAll(".select__option"),select_search_text=e.target.value.toUpperCase();for(let i=0;i<select_options.length;i++){let select_option=select_options[i],select_txt_value;(select_option.textContent||select_option.innerText).toUpperCase().indexOf(select_search_text)>-1?select_option.style.display="":select_option.style.display="none"}}function selects_update_all(){let selects=document.querySelectorAll("select");if(selects)for(let index=0;index<selects.length;index++){const select=selects[index];select_item(select)}}selects.length>0&&selects_init();let inputs=document.querySelectorAll("input[data-value],textarea[data-value]");function inputs_init(inputs){if(inputs.length>0)for(let index=0;index<inputs.length;index++){const input=inputs[index],input_g_value=input.getAttribute("data-value");input_placeholder_add(input),""!=input.value&&input.value!=input_g_value&&input_focus_add(input),input.addEventListener("focus",(function(e){input.value==input_g_value&&(input_focus_add(input),input.value=""),"pass"===input.getAttribute("data-type")&&input.setAttribute("type","password"),input.classList.contains("_date"),input.classList.contains("_phone")&&(input.classList.add("_mask"),Inputmask("+375 (99) 9999999",{clearIncomplete:!0,clearMaskOnLostFocus:!0,onincomplete:function(){input_clear_mask(input,input_g_value)}}).mask(input)),input.classList.contains("_digital")&&(input.classList.add("_mask"),Inputmask("9{1,}",{placeholder:"",clearIncomplete:!0,clearMaskOnLostFocus:!0,onincomplete:function(){input_clear_mask(input,input_g_value)}}).mask(input)),form_remove_error(input)})),input.addEventListener("blur",(function(e){""==input.value&&(input.value=input_g_value,input_focus_remove(input),input.classList.contains("_mask")&&input_clear_mask(input,input_g_value),"pass"===input.getAttribute("data-type")&&input.setAttribute("type","text"))})),input.classList.contains("_date")&&datepicker(input,{customDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],customMonths:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],formatter:(input,date,instance)=>{const value=date.toLocaleDateString();input.value=value},onSelect:function(input,instance,date){input_focus_add(input.el)}})}}function input_placeholder_add(input){const input_g_value=input.getAttribute("data-value");""==input.value&&""!=input_g_value&&(input.value=input_g_value)}function input_focus_add(input){input.classList.add("_focus"),input.parentElement.classList.add("_focus")}function input_focus_remove(input){input.classList.remove("_focus"),input.parentElement.classList.remove("_focus")}function input_clear_mask(input,input_g_value){input.inputmask.remove(),input.value=input_g_value,input_focus_remove(input)}inputs_init(inputs);let quantityButtons=document.querySelectorAll(".quantity__button");if(quantityButtons.length>0)for(let index=0;index<quantityButtons.length;index++){const quantityButton=quantityButtons[index];quantityButton.addEventListener("click",(function(e){let value=parseInt(quantityButton.closest(".quantity").querySelector("input").value);quantityButton.classList.contains("quantity__button_plus")?value++:(value-=1,value<1&&(value=1)),quantityButton.closest(".quantity").querySelector("input").value=value}))}const priceSlider=document.querySelector(".price__range");if(priceSlider){noUiSlider.create(priceSlider,{start:[0,2e5],connect:!0,tooltips:[wNumb({decimals:0}),wNumb({decimals:0})],range:{min:[0],max:[2e5]}});const priceStart=document.getElementById("price-start"),priceEnd=document.getElementById("price-end");function setPriceValues(){let priceStartValue,priceEndValue;""!=priceStart.value&&(priceStartValue=priceStart.value),""!=priceEnd.value&&(priceEndValue=priceEnd.value),priceSlider.noUiSlider.set([priceStartValue,priceEndValue])}priceStart.addEventListener("change",setPriceValues),priceEnd.addEventListener("change",setPriceValues)}let scr_body=document.querySelector("body"),scr_blocks=document.querySelectorAll("._scr-sector"),scr_items=document.querySelectorAll("._scr-item"),scr_fix_block=document.querySelectorAll("._side-wrapper"),scr_min_height=750,scrolling=!0,scrolling_full=!0,scrollDirection=0;function scroll_scroll(){let src_value=pageYOffset,header=document.querySelector("header.header");if(null!==header&&(src_value>10?header.classList.add("_scroll"):header.classList.remove("_scroll")),scr_blocks.length>0)for(let index=0;index<scr_blocks.length;index++){let block=scr_blocks[index],block_offset=offset(block).top,block_height=block.offsetHeight;pageYOffset>block_offset-window.innerHeight/1.5&&pageYOffset<block_offset+block_height-window.innerHeight/5?block.classList.add("_scr-sector_active"):block.classList.contains("_scr-sector_active")&&block.classList.remove("_scr-sector_active"),pageYOffset>block_offset-window.innerHeight/2&&pageYOffset<block_offset+block_height-window.innerHeight/5?block.classList.contains("_scr-sector_current")||block.classList.add("_scr-sector_current"):block.classList.contains("_scr-sector_current")&&block.classList.remove("_scr-sector_current")}if(scr_items.length>0)for(let index=0;index<scr_items.length;index++){let scr_item=scr_items[index],scr_item_offset=offset(scr_item).top,scr_item_height=scr_item.offsetHeight,scr_item_point=window.innerHeight-(window.innerHeight-scr_item_height/3);window.innerHeight>scr_item_height&&(scr_item_point=window.innerHeight-scr_item_height/3),src_value>scr_item_offset-scr_item_point&&src_value<scr_item_offset+scr_item_height?(scr_item.classList.add("_active"),scroll_load_item(scr_item)):scr_item.classList.remove("_active"),src_value>scr_item_offset-window.innerHeight&&scr_item.querySelectorAll("._lazy").length>0&&scroll_lazy(scr_item)}scr_fix_block.length>0&&fix_block(scr_fix_block,src_value);let custom_scroll_line=document.querySelector("._custom-scroll__line");if(custom_scroll_line){let window_height=window.innerHeight,content_height=document.querySelector(".wrapper").offsetHeight,scr_procent=pageYOffset/(content_height-window_height)*100,custom_scroll_line_height=custom_scroll_line.offsetHeight;custom_scroll_line.style.transform="translateY("+(window_height-custom_scroll_line_height)/100*scr_procent+"px)"}scrollDirection=src_value<=0?0:src_value}function scroll_lazy(scr_item){let lazy_src=scr_item.querySelectorAll("*[data-src]");if(lazy_src.length>0)for(let index=0;index<lazy_src.length;index++){const el=lazy_src[index];el.classList.contains("_loaded")||(el.setAttribute("src",el.getAttribute("data-src")),el.classList.add("_loaded"))}let lazy_srcset=scr_item.querySelectorAll("*[data-srcset]");if(lazy_srcset.length>0)for(let index=0;index<lazy_srcset.length;index++){const el=lazy_srcset[index];el.classList.contains("_loaded")||(el.setAttribute("srcset",el.getAttribute("data-srcset")),el.classList.add("_loaded"))}}function scroll_load_item(scr_item){if(scr_item.classList.contains("_load-map")&&!scr_item.classList.contains("_loaded-map")){let map_item;document.getElementById("map")&&(scr_item.classList.add("_loaded-map"),map())}}function full_scroll(e){let viewport_height=window.innerHeight;if(viewport_height>=scr_min_height)if(scrolling_full){let current_scroll=pageYOffset,current_block=document.querySelector("._scr-sector._scr-sector_current"),current_block_pos=offset(current_block).top,current_block_height=current_block.offsetHeight,current_block_next=current_block.nextElementSibling,current_block_prev=current_block.previousElementSibling,block_pos;if(40==e.keyCode||34==e.keyCode||e.deltaX>0||e.deltaY<0)if(current_block_prev){let current_block_prev_height=current_block_prev.offsetHeight;block_pos=offset(current_block_prev).top,current_block_height<=viewport_height?current_block_prev_height>=viewport_height&&(block_pos+=current_block_prev_height-viewport_height,full_scroll_to_sector(block_pos)):(enableScroll(),current_scroll<=current_block_pos&&full_scroll_to_sector(block_pos))}else full_scroll_pagestart();else(38==e.keyCode||33==e.keyCode||e.deltaX<0||e.deltaY>0)&&(current_block_next?(block_pos=offset(current_block_next).top,current_block_height<=viewport_height?full_scroll_to_sector(block_pos):(enableScroll(),current_scroll>=block_pos-viewport_height&&full_scroll_to_sector(block_pos))):full_scroll_pageend())}else disableScroll();else enableScroll()}function full_scroll_to_sector(pos){disableScroll(),scrolling_full=!1,_goto(pos,800);let scr_pause=500;-1!=navigator.appVersion.indexOf("Mac")&&(scr_pause=1e3),setTimeout((function(){scrolling_full=!0}),scr_pause)}function full_scroll_pagestart(){}function full_scroll_pageend(){}window.addEventListener("scroll",scroll_scroll),setTimeout((function(){scroll_scroll()}),100),scr_blocks.length>0&&!isMobile.any()&&(disableScroll(),window.addEventListener("wheel",full_scroll));let link=document.querySelectorAll("._goto-block");if(link){let blocks=[];for(let index=0;index<link.length;index++){let el=link[index],block_name=el.getAttribute("href").replace("#","");""==block_name||~blocks.indexOf(block_name)||blocks.push(block_name),el.addEventListener("click",(function(e){document.querySelector(".menu__body._active")&&(menu_close(),body_lock_remove(500));let target_block_class=el.getAttribute("href").replace("#",""),target_block;_goto(document.querySelector("."+target_block_class),300),e.preventDefault()}))}window.addEventListener("scroll",(function(el){let old_current_link=document.querySelectorAll("._goto-block._active");if(old_current_link)for(let index=0;index<old_current_link.length;index++){let el;old_current_link[index].classList.remove("_active")}for(let index=0;index<blocks.length;index++){let block=blocks[index],block_item=document.querySelector("."+block);if(block_item){let block_offset=offset(block_item).top,block_height=block_item.offsetHeight;if(pageYOffset>block_offset-window.innerHeight/3&&pageYOffset<block_offset+block_height-window.innerHeight/3){let current_links=document.querySelectorAll('._goto-block[href="#'+block+'"]');for(let index=0;index<current_links.length;index++){let current_link;current_links[index].classList.add("_active")}}}}}))}let goto_links=document.querySelectorAll("._goto");if(goto_links)for(let index=0;index<goto_links.length;index++){let goto_link=goto_links[index];goto_link.addEventListener("click",(function(e){let target_block_class=goto_link.getAttribute("href").replace("#",""),target_block;_goto(document.querySelector("."+target_block_class),300),e.preventDefault()}))}function _goto(target_block,speed,offset=0){let header="",options={speedAsDuration:!0,speed:speed,header:"",offset:offset,easing:"easeOutQuad"},scr;(new SmoothScroll).animateScroll(target_block,"",options)}function offset(el){var rect=el.getBoundingClientRect(),scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,scrollTop=window.pageYOffset||document.documentElement.scrollTop;return{top:rect.top+scrollTop,left:rect.left+scrollLeft}}function disableScroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),document.addEventListener("wheel",preventDefault,{passive:!1}),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),document.removeEventListener("wheel",preventDefault,{passive:!1}),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}function preventDefault(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}function preventDefaultForScrollKeys(e){}function fix_block(scr_fix_block,scr_value){let window_width=parseInt(window.innerWidth),window_height=parseInt(window.innerHeight),header_height=parseInt(document.querySelector("header").offsetHeight)+15;for(let index=0;index<scr_fix_block.length;index++){const block=scr_fix_block[index];let block_width=block.getAttribute("data-width");const item=block.querySelector("._side-block");block_width||(block_width=0),window_width>block_width&&(item.offsetHeight<window_height-(header_height+30)?(scr_value>offset(block).top-(header_height+15)?item.style.cssText="position:fixed;bottom:auto;top:"+header_height+"px;width:"+block.offsetWidth+"px;left:"+offset(block).left+"px;":gotoRelative(item),scr_value>block.offsetHeight+offset(block).top-(item.offsetHeight+(header_height+15))&&(block.style.cssText="position:relative;",item.style.cssText="position:absolute;bottom:0;top:auto;left:0px;width:100%")):gotoRelative(item))}function gotoRelative(item){item.style.cssText="position:relative;bottom:auto;top:0px;left:0px;"}}function custom_scroll(event){scr_body.style.overflow="hidden";let window_height=window.innerHeight,custom_scroll_line=document.querySelector("._custom-scroll__line"),custom_scroll_content_height=document.querySelector(".wrapper").offsetHeight,custom_cursor_height=Math.min(window_height,Math.round(window_height*(window_height/custom_scroll_content_height)));if(custom_scroll_content_height>window_height){if(!custom_scroll_line){let custom_scroll=document.createElement("div");custom_scroll_line=document.createElement("div"),custom_scroll.setAttribute("class","_custom-scroll"),custom_scroll_line.setAttribute("class","_custom-scroll__line"),custom_scroll.appendChild(custom_scroll_line),scr_body.appendChild(custom_scroll)}custom_scroll_line.style.height=custom_cursor_height+"px"}}isMobile.any();let new_pos=pageYOffset;function scroll_animate(event){let window_height=window.innerHeight,content_height=document.querySelector(".wrapper").offsetHeight,start_position=pageYOffset,pos_add=100;if(40==event.keyCode||34==event.keyCode||event.deltaX>0||event.deltaY<0?new_pos-=100:(38==event.keyCode||33==event.keyCode||event.deltaX<0||event.deltaY>0)&&(new_pos+=100),new_pos>content_height-window_height&&(new_pos=content_height-window_height),new_pos<0&&(new_pos=0),scrolling){scrolling=!1,_goto(new_pos,1e3);let scr_pause=100;-1!=navigator.appVersion.indexOf("Mac")&&(scr_pause*=2),setTimeout((function(){scrolling=!0,_goto(new_pos,1e3)}),scr_pause)}}const devices=/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB10|IEMobile|Opera Mini/.test(navigator.userAgent),turnOnFullScreen=target=>{const gameWindow=document.querySelector(".b-game__window");gameWindow.classList.add("_fullscreen");const requestMethod=target.requestFullScreen||target.webkitRequestFullScreen||target.mozRequestFullScreen||target.msRequestFullScreen;requestMethod&&requestMethod.call(target)},turnOffFullScreen=()=>{const gameWindow=document.querySelector(".b-game__window");gameWindow.classList.remove("_fullscreen"),document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},popupCenter=config=>{var width=config.width,height=config.height,src=config.src,alt=config.alt,styles=config.styles,dualScreenLeft=void 0!==window.screenLeft?window.screenLeft:window.screenX,dualScreenTop=void 0!==window.screenTop?window.screenTop:window.screenY,w=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,h=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,systemZoom=width/window.screen.availWidth,left=(w-width)/2/systemZoom+dualScreenLeft,top=(h-height)/2/systemZoom+dualScreenTop,newWindow=window.open(src,alt,"\n      scrollbars=yes,\n      width="+w/systemZoom+",\n      height="+h/systemZoom+",\n      top="+top+",\n      left="+left+"\n    ");window.focus&&newWindow.focus()},initGameFunctionality=()=>{const gameWindow=document.querySelector(".b-game__window"),gamePlayBtn=document.querySelector(".b-game__start-btn"),gamePlayBtnTxt=gamePlayBtn.textContent,gamePlayBtnTxtSub="play another",gamePlayBtnTxtContinue="continue",gameBackBtn=document.querySelector(".b-game__window-back"),gameIframeAlt=gamePlayBtn.getAttribute("alt"),gameIframeSrc=gamePlayBtn.getAttribute("data-iframe-src"),gameIframeDataSandbox=gamePlayBtn.getAttribute("data-sandbox"),gameIframeSandbox=1==gameIframeDataSandbox?"allow-same-origin allow-scripts allow-modals":"",gameIframeTargetBlank=gamePlayBtn.getAttribute("data-target-blank"),gameIframeFullScreen=gamePlayBtn.getAttribute("data-fullscreen"),gameIframeHorizontal=gamePlayBtn.getAttribute("data-horizontal"),gameIframeStyle=gamePlayBtn.getAttribute("data-iframe-style"),gameIframeWgContent=gamePlayBtn.getAttribute("data-wg-content"),gameFullScreener=document.querySelector(".b-game__actions-fullscreen"),isGameOnlyPc=gameWindow.classList.contains("_only-pc"),newMod=document.querySelector("#new-mod"),changeGameBtnText=isGameWindowMob=>{gamePlayBtn.innerHTML=isGameOnlyPc&&isGameWindowMob?"play another":gamePlayBtnTxt},goToNewModListener=e=>{e.preventDefault(),_goto(newMod,500,25)},goToNewMod=isGameWindowMob=>{isGameOnlyPc&&isGameWindowMob?gamePlayBtn.addEventListener("click",goToNewModListener):gamePlayBtn.removeEventListener("click",goToNewModListener)},hideGamePreview=()=>{gameWindow.classList.add("_preview-hidden")},showGamePreview=()=>{gameWindow.classList.remove("_preview-hidden")},createGameIframe=()=>{const gameIframeCreated=document.createElement("iframe");return gameIframeCreated.classList.add("b-game__iframe"),gameIframeCreated.setAttribute("src",gameIframeSrc),gameIframeCreated.setAttribute("sandbox",gameIframeSandbox),gameIframeCreated.setAttribute("style",gameIframeStyle),gameIframeCreated.setAttribute("marginwidth",0),gameIframeCreated.setAttribute("marginheight",0),gameIframeCreated.setAttribute("frameborder",0),gameIframeCreated.setAttribute("allowfullscreen",""),gameIframeCreated.setAttribute("data-wg-content",gameIframeWgContent),gameIframeCreated},appendGameIframe=()=>{const hasIframe=gameWindow.classList.contains("_has-iframe");if(hasIframe)return;const gameIframeCreated=createGameIframe();gameWindow.classList.add("_has-iframe"),gameWindow.appendChild(gameIframeCreated)},removeGameIframe=isGameWindowMob=>{const gameIframe=document.querySelector(".b-game__iframe"),hasIframe=gameWindow.classList.contains("_has-iframe");isGameOnlyPc&&gameIframe&&hasIframe&&isGameWindowMob&&(gameWindow.classList.remove("_has-iframe"),gameIframe.remove(),showGamePreview())},lockMobGameOrientation=()=>{"1"===gameIframeHorizontal&&(screen.orientation?screen.orientation.lock("landscape"):screen.msLockOrientation?screen.msLockOrientation.lock("landscape"):screen.mozLockOrientation&&screen.mozLockOrientation.lock("landscape"))},playGameListener=e=>{e.preventDefault(),hideGamePreview(),appendGameIframe()},playGameListenerForFullScreen=e=>{e.preventDefault(),hideGamePreview(),turnOnFullScreen(gameWindow),appendGameIframe(),lockMobGameOrientation()},playGameListenerPopup=()=>{popupCenter({src:gameIframeSrc,alt:gameIframeAlt,styles:gameIframeStyle})},playGame=isGameWindowMob=>{"1"===gameIframeTargetBlank?isGameOnlyPc||gamePlayBtn.addEventListener("click",playGameListenerPopup):isGameOnlyPc&&isGameWindowMob?gamePlayBtn.removeEventListener("click",playGameListener):!isGameOnlyPc&&isGameWindowMob?gamePlayBtn.addEventListener("click",playGameListenerForFullScreen):isGameWindowMob||(gamePlayBtn.removeEventListener("click",playGameListenerForFullScreen),gamePlayBtn.addEventListener("click",playGameListener))},checkIfFullScreenListener=()=>{document.fullscreen?hideGamePreview():(showGamePreview(),gamePlayBtn.innerHTML="continue",gameWindow.classList.remove("_fullscreen"))},checkIfFullScreenListenerMoz=()=>{document.mozFullScreen?hideGamePreview():(showGamePreview(),gamePlayBtn.innerHTML="continue",gameWindow.classList.remove("_fullscreen"))},checkIfFullScreenListenerWebkit=()=>{document.webkitIsFullScreen?hideGamePreview():(showGamePreview(),gamePlayBtn.innerHTML="continue",gameWindow.classList.remove("_fullscreen"))},checkIfFullScreen=isGameWindowMob=>{isGameWindowMob?(document.addEventListener("fullscreenchange",checkIfFullScreenListener,!1),document.addEventListener("mozfullscreenchange",checkIfFullScreenListenerMoz,!1),document.addEventListener("webkitfullscreenchange",checkIfFullScreenListenerWebkit,!1)):(document.removeEventListener("fullscreenchange",checkIfFullScreenListener,!1),document.removeEventListener("mozfullscreenchange",checkIfFullScreenListenerMoz,!1),document.removeEventListener("webkitfullscreenchange",checkIfFullScreenListenerWebkit,!1))},dragGameBtnBack=()=>{var active=!1,currentY,initialY,yOffset=0;function dragStart(e){initialY="touchstart"===e.type?e.touches[0].clientY-yOffset:e.clientY-yOffset,e.target===gameBackBtn&&(active=!0)}function dragEnd(){initialY=currentY,active=!1}function drag(e){active&&(e.preventDefault(),(currentY="touchmove"===e.type?e.touches[0].clientY-initialY:e.clientY-initialY)<=gameWindow.offsetHeight-80&&currentY>0&&(yOffset=currentY,setTranslate(currentY,gameBackBtn)))}function setTranslate(yPos,el){el.style.transform="translate3d(0px, "+yPos+"px, 0)"}gameWindow.addEventListener("touchstart",dragStart,!1),gameWindow.addEventListener("touchend",dragEnd,!1),gameWindow.addEventListener("touchmove",drag,!1),gameWindow.addEventListener("mousedown",dragStart,!1),gameWindow.addEventListener("mouseup",dragEnd,!1),gameWindow.addEventListener("mousemove",drag,!1)};dragGameBtnBack();const backGame=()=>{gameBackBtn.addEventListener("click",()=>{gameWindow.classList.remove("_preview-hidden"),gamePlayBtn.innerHTML="continue",turnOffFullScreen()})};backGame();const checkContinueState=isGameWindowMob=>{const hasIframe=gameWindow.classList.contains("_has-iframe");isGameWindowMob&&hasIframe&&(showGamePreview(),gamePlayBtn.innerHTML="continue")},checkWindowResize=()=>{const targetWidth=899.98;let isGameWindowMob=!1,isGameWindowDesk=!1;const detectResize=curWidth=>{curWidth<=899.98&&!isGameWindowMob?(isGameWindowMob=!0,isGameWindowDesk=!1,changeGameBtnText(isGameWindowMob),goToNewMod(isGameWindowMob),playGame(isGameWindowMob),removeGameIframe(isGameWindowMob),checkIfFullScreen(isGameWindowMob),checkContinueState(isGameWindowMob)):curWidth>899.98&&!isGameWindowDesk&&(isGameWindowMob=!1,isGameWindowDesk=!0,changeGameBtnText(isGameWindowMob),goToNewMod(isGameWindowMob),playGame(isGameWindowMob),removeGameIframe(isGameWindowMob),checkIfFullScreen(isGameWindowMob),checkContinueState(isGameWindowMob))};let curWidth=window.innerWidth;detectResize(curWidth),window.addEventListener("resize",()=>{let curWidth=window.innerWidth;detectResize(curWidth)})};checkWindowResize();const fullScreenGame=()=>{gameFullScreener.addEventListener("click",()=>{turnOnFullScreen(gameWindow)})};fullScreenGame()};initGameFunctionality();