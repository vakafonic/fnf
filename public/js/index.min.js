function initCustomScrollBar(){var e=$(".nano");e.length&&(e.nanoScroller(),$(".catalog-row .nano, .catalog-row-single .nano").each(function(){var e=$(this);e.on("update",function(a,s){"down"==s.direction?$(e).addClass("is-scrolling"):0==s.position&&$(e).removeClass("is-scrolling"),s.position>=s.maximum-30?$(e).addClass("is-scrolled"):$(e).removeClass("is-scrolled")})}))}function openSearchForm(){$(".search-opener").on("click",function(e){e.stopPropagation();var a=$(".wrapper"),s="has-open-search";$(".nav-item").hasClass("is-current")&&$(".nav-item").removeClass("is-current"),a.hasClass("has-open-catalog")&&a.removeClass("has-open-catalog"),setTimeout(function(){$(".search-field").focus()},200),a.hasClass(s)?(a.removeClass(s),$(".search-field").val("").removeClass("is-not-empty not-empty")):a.addClass(s),a.on("click",function(e){$(e.target).closest(".search-opener, .search").length||a.hasClass(s)&&(a.removeClass(s),$(".search-field").val("").removeClass("is-not-empty not-empty"))})})}function closeSearchForm(){$(".search-closer").on("click",function(){var e=$(".wrapper");e.hasClass("has-open-search")&&(e.removeClass("has-open-search"),$(".search-field").val("").removeClass("is-not-empty not-empty"))})}function showSearchCleaner(){$(".search-field").on("keyup",function(){""===$(this).val()?$(this).removeClass("is-not-empty"):$(this).addClass("is-not-empty")})}function clearSearchField(){$(".search-cleaner").on("click",function(){$(".search-field").val("").keyup().focus()})}function openCatalogByHover(){var e,a='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="80px" height="80px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n    <circle cx="50" cy="50" r="45" stroke-width="8" stroke="#e45e14" stroke-dasharray="70.68583470577035 70.68583470577035" fill="none" stroke-linecap="round">\n    <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="0 50 50;360 50 50"></animateTransform>\n    </circle></svg>';$(".nav-link:not(.has-no-catalog)").hover(function(){var s=$(".wrapper"),o=$(this).parent();$(window).width()>1024?e=setTimeout(function(){s.addClass("has-open-catalog"),$(".nav-item.is-current").removeClass("is-current"),o.addClass("is-current");var e=o.closest(".navbar-body").attr("data-get-modal-url"),t=o.find(".catalog").attr("data-modal-type"),n=o.find(".catalog").attr("data-locale"),r=o.find(".btn-line");if("girls"==t||"boys"==t||"kids"==t){var i=o.find(".catalog").attr("data-page");$.ajax({url:e,type:"POST",dataType:"html",data:{type:t,locale_id:n,page_id:i,items_type:"genres"},beforeSend:function(){r.hide(),o.find(".catalog-items").append(a)},success:function(e){o.find(".catalog-items-genres").html(e),r.show(),initCustomScrollBar(),showThumbPreview(),lozad(".catalog .demilazyload").observe()},error:function(e,a,s){console.log("error")}}),$.ajax({url:e,type:"POST",dataType:"html",data:{type:t,locale_id:n,page_id:i,items_type:"heroes"},success:function(e){o.find(".catalog-items-heroes").html(e),initCustomScrollBar(),showThumbPreview(),lozad(".catalog .demilazyload").observe()},error:function(e,a,s){console.log("error")}}),$.ajax({url:e,type:"POST",dataType:"html",data:{type:t,locale_id:n,page_id:i,items_type:"games"},success:function(e){o.find(".catalog-items-games").html(e),initCustomScrollBar(),showThumbPreview(),lozad(".catalog .demilazyload").observe()},error:function(e,a,s){console.log("error")}})}else if("heroes"==t||"genres"==t){var l=o.find(".catalog-items");$.ajax({url:e,type:"POST",dataType:"html",data:{type:t,locale_id:n},beforeSend:function(){r.hide(),o.find(".catalog-items").append(a)},success:function(e){l.html(e),r.show(),initCustomScrollBar(),showThumbPreview(),lozad(".catalog .demilazyload").observe()},error:function(e,a,s){console.log("error")}})}},300):(s.removeClass("has-open-catalog"),o.removeClass("is-current")),s.on("click",function(e){$(e.target).closest(".navbar, .catalog").length||(s.removeClass("has-open-catalog"),o.removeClass("is-current"))})},function(){clearTimeout(e),$(".nav-link:not(.has-no-catalog)").on("click",function(){clearTimeout(e)})})}function openCatalogByClick(){var e='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="80px" height="80px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n    <circle cx="50" cy="50" r="45" stroke-width="8" stroke="#e45e14" stroke-dasharray="70.68583470577035 70.68583470577035" fill="none" stroke-linecap="round">\n    <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="0 50 50;360 50 50"></animateTransform>\n    </circle></svg>';$(".catalog-opener").on("click",function(){var a=$(".wrapper"),s=$(this).siblings(".catalog"),o=$(this).parent(),t=o.closest(".navbar-body").attr("data-get-modal-url"),n=o.find(".catalog").attr("data-modal-type"),r=o.find(".catalog").attr("data-locale"),i=o.find(".btn-line");if("girls"==n||"boys"==n||"kids"==n){var l=o.find(".catalog").attr("data-page");$.ajax({url:t,type:"POST",dataType:"html",data:{type:n,locale_id:r,page_id:l,items_type:"genres"},beforeSend:function(){o.find(".catalog-items").append(e)},success:function(e){o.find(".catalog-items-genres").html(e),initCustomScrollBar(),showThumbPreview(),lozad(".catalog .demilazyload").observe()},error:function(e,a,s){console.log("error")}}),$.ajax({url:t,type:"POST",dataType:"html",data:{type:n,locale_id:r,page_id:l,items_type:"heroes"},success:function(e){o.find(".catalog-items-heroes").html(e),initCustomScrollBar(),showThumbPreview(),lozad(".catalog .demilazyload").observe()},error:function(e,a,s){console.log("error")}}),$.ajax({url:t,type:"POST",dataType:"html",data:{type:n,locale_id:r,page_id:l,items_type:"games"},success:function(e){o.find(".catalog-items-games").html(e),initCustomScrollBar(),showThumbPreview(),lozad(".catalog .demilazyload").observe()},error:function(e,a,s){console.log("error")}})}else if("heroes"==n||"genres"==n){var c=o.find(".catalog-items");$.ajax({url:t,type:"POST",dataType:"html",data:{type:n,locale_id:r},beforeSend:function(){i.hide(),o.find(".catalog-items").append(e)},success:function(e){c.html(e),i.show(),initCustomScrollBar(),showThumbPreview(),lozad(".catalog .demilazyload").observe()},error:function(e,a,s){console.log("error")}})}s.hasClass("is-open-mob")?s.removeClass("is-open-mob"):s.addClass("is-open-mob"),a.on("click",function(e){$(e.target).closest(".catalog").length||a.hasClass("has-open-navbar")||$(".catalog").removeClass("is-open-mob")})})}function closeCatalog(){$(".catalog-closer").on("click",function(){var e=$(".wrapper");$(".nav-item").hasClass("is-current")&&$(".nav-item").removeClass("is-current"),$(".catalog").hasClass("is-open")&&$(".catalog").removeClass("is-open"),e.hasClass("has-open-catalog")&&e.removeClass("has-open-catalog")})}function openGamesBl(){$(".js-games-opener").on("click",function(){var e=$(".wrapper"),a="has-open-games";e.hasClass(a)?e.removeClass(a):e.addClass(a),$(".games").on("click",function(s){$(s.target).closest(".circle-bg-closer, .games-inner, .scroller-to-top").length||e.hasClass(a)&&e.removeClass(a)})})}function closeGamesBl(){$(".circle-bg-closer").on("click",function(){var e=$(".wrapper");e.hasClass("has-open-games")&&e.removeClass("has-open-games")})}function toggleGamesBl(){$(".js-games-tab").on("click",function(e){e.preventDefault();var a=$(this).attr("data-toggler"),s=$('[data-toggle="'+a+'"]');$(".js-games-tab.is-current").removeClass("is-current"),$(this).addClass("is-current"),$(".games-bl").hasClass("is-open")&&$(".games-bl").removeClass("is-open"),s.addClass("is-open")})}function openMemberForm(){$(".member-opener, .member-enter").on("click",function(){var e=$(".wrapper"),a="has-open-member";e.hasClass(a)?e.removeClass(a):e.addClass(a),$(".member").on("click",function(s){$(s.target).closest(".bg-closer, .member-inner").length||e.hasClass(a)&&e.removeClass(a)})})}function closeMemberForm(){$(".bg-closer").on("click",function(){var e=$(".wrapper");e.hasClass("has-open-member")&&e.removeClass("has-open-member")})}function toggleMemberForm(){$(".js-member-tab").on("click",function(e){e.preventDefault();var a=$(this).attr("data-toggler"),s=$('[data-toggle="'+a+'"]');$(".js-member-tab.is-current").removeClass("is-current"),$(this).addClass("is-current"),$(".member-bl").hasClass("is-open")&&$(".member-bl").removeClass("is-open"),s.addClass("is-open")})}function focusOnField(){$(".form-field, .form-textarea").on("focus",function(){$(this).parent().addClass("is-focused")}).on("blur",function(e){$(this).parent().removeClass("is-focused")}),$(".form-field, .form-textarea").val()&&$(".form-field, .form-textarea").addClass("not-empty")}function fixLabel(){$(".form-field, .form-textarea").on("keyup",function(){""===$(this).val()?($(this).removeClass("is-not-empty"),$(this).removeClass("not-empty")):($(this).addClass("is-not-empty"),$(this).addClass("not-empty"))})}function showPassword(){$(".form-pass-hider").on("click",function(){$(this).is(".is-active")?($(this).removeClass("is-active").text("Показать"),$(this).next("input").attr("type","password")):($(this).addClass("is-active").text("Скрыть"),$(this).next("input").attr("type","text"))})}function openRecoveryForm(){$(".recovery-opener").on("click",function(){var e=$(".wrapper");e.hasClass("has-open-recovery")?e.removeClass("has-open-recovery"):e.addClass("has-open-recovery"),$(".recovery").on("click",function(e){$(e.target).closest(".recovery-back-btn, .bg-closer, .recovery-inner").length})})}function closeRecoveryForm(){$(".recovery .bg-closer").on("click",function(){var e=$(".wrapper");(e.hasClass("has-open-recovery")||e.hasClass("has-open-member"))&&(e.removeClass("has-open-recovery"),e.removeClass("has-open-member"))})}function backToMemberFrom(){$(".recovery-back-btn").on("click",function(){var e=$(".wrapper");e.hasClass("has-open-recovery")&&e.removeClass("has-open-recovery")})}function closeMailNotify(){var e=$(".wrapper"),a="has-open-mail";$(".mail .bg-closer").on("click",function(){e.hasClass(a)&&e.removeClass(a),e.hasClass("has-open-member")&&e.removeClass("has-open-member"),e.hasClass("has-open-recovery")&&e.removeClass("has-open-recovery")}),$(".mail").on("click",function(s){$(s.target).closest(".bg-closer, .mail-inner").length||(e.hasClass(a)&&e.removeClass(a),e.hasClass("has-open-member")&&e.removeClass("has-open-member"),e.hasClass("has-open-recovery")&&e.removeClass("has-open-recovery"))})}function showThumbPreview(){var e=!1,a=!1,s=1024,o=".thumb-inner",t="is-hovered",n="is-touched";$(o).length&&(d($(window).innerWidth()),$(window).on("resize",function(){d($(window).innerWidth())}));function r(e){var a=e.find(".thumb-video");if(a.length){var s='<source src="'+a.data("src")+'" type="video/mp4">';a.html(s);var o=a[0].play();void 0!==o&&o.then(function(e){}).catch(function(e){})}}function i(e){var a=e.find(".img-scaler"),s=e.find(".thumb-video");s.on("loadstart",function(){var e=a.find(".thumb-loader");a.addClass("has-loader"),e.length||a.append('<div class="thumb-loader">"<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="60px" height="60px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n<circle cx="50" cy="50" r="45" stroke-width="8" stroke="#e45e14" stroke-dasharray="70.68583470577035 70.68583470577035" fill="none" stroke-linecap="round">\n<animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="0 50 50;360 50 50"></animateTransform>\n</circle></svg>"</div>')}),s.on("canplay",function(){var e=a.find(".thumb-loader");a.removeClass("has-loader"),e.remove()})}function l(){var e;$(o).on("mouseenter",function(a){var s=$(this);!function(e){e.find(".thumb-link").append('<span class="cursor"></span>');var a=e.find(".cursor");a.text(mailLang.play),a.css("top","-100%"),a.css("left","-100%"),function(e,a){e.on("mousemove",function(e){a.css("left",e.originalEvent.offsetX-a.prop("offsetWidth")/2),a.css("top",e.originalEvent.offsetY-a.prop("offsetHeight")/2)})}(e,a)}(s),e=setTimeout(function(){r(s),function(e){e.addClass(t)}(s),i(s)},200)}),$(o).on("mouseleave",function(a){var s=$(this);clearTimeout(e),function(e){var a=e.find(".thumb-video"),s=e.find("source");s.length&&(a[0].pause(),s.remove())}(s),function(e){e.removeClass(t)}(s),function(e){var a=e.find(".cursor");a.length&&a.remove()}(s),function(e){var a=e.find(".img-scaler"),s=e.find(".thumb-video"),o=a.find(".thumb-loader");s.off("loadstart"),s.off("canplay"),a.hasClass("has-loader")&&a.removeClass("has-loader"),o.length&&o.remove()}(s)})}function c(){var e;$(o).on("touchstart",function(a){var s=$(this);$(".thumb-inner.is-touched").each(function(){$(this).removeClass(n),$(this).find(".thumb-video")[0].pause(),$(this).find("source").remove()}),$(".wrapper").on("click",function(e){$(e.target).closest(".thumb-inner").length||$(".thumb-inner.is-touched").each(function(){$(this).removeClass(n),$(this).find(".thumb-video")[0].pause(),$(this).find("source").remove()})}),e=setTimeout(function(){!function(e){e.addClass(n)}(s),r(s),i(s)},100)}),$(o).on("touchend",function(a){clearTimeout(e)})}function d(t){t>s&&!e&&(e=!0,a=!1,$(o).off("touchstart"),l()),(t<=s&&!a||/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB10|IEMobile|Opera Mini/.test(navigator.userAgent))&&(e=!1,a=!0,c(),$(o).off("mouseenter"))}}function drawChart(){var e=document.querySelectorAll(".label-progress-percents");e.length&&e.forEach(function(e){var a=e.dataset.percent/100,s=e.offsetWidth,o=Math.ceil(s*Math.PI),t=Math.ceil(o*a),n=o-t;e.querySelector(".label-progress-inner").style.strokeDasharray=t+"px "+n+"px"})}function dropLangsList(){$(".langs-opener").on("click",function(){var e=$(".wrapper"),a=$(this).parent();a.hasClass("is-open")?a.removeClass("is-open"):a.addClass("is-open"),e.on("click",function(e){$(e.target).closest(".langs").length||a.hasClass("is-open")&&a.removeClass("is-open")})})}function openFeedbackForm(){$('.feedback-opener, a[href="#feedback"], .mail-link').on("click",function(){var e=$(".wrapper"),a="has-open-feedback";e.hasClass("has-open-not-working")&&e.removeClass(a),e.hasClass(a)?e.removeClass(a):e.addClass(a),$(".feedback").on("click",function(s){$(s.target).closest(".bg-closer, .feedback-inner").length||(e.hasClass("has-open-not-working")&&e.removeClass(a),e.hasClass("has-open-mail")&&e.removeClass(a),e.hasClass(a)&&e.removeClass(a))})})}function closeFeedbackForm(){$(".feedback .bg-closer").on("click",function(){var e=$(".wrapper");e.hasClass("has-open-feedback")&&e.removeClass("has-open-feedback")})}function openAuthForm(){$(".auth-opener").on("click",function(){var e=$(".wrapper"),a="has-open-member",s=$('[data-toggler="auth"]'),o=$('[data-toggler="register"]'),t=$('[data-toggle="auth"]'),n=$('[data-toggle="register"]');s.addClass("is-current"),t.addClass("is-open"),o.removeClass("is-current"),n.removeClass("is-open"),e.hasClass(a)?e.removeClass(a):e.addClass(a),$(".member").on("click",function(s){$(s.target).closest(".bg-closer, .member-inner").length||e.hasClass(a)&&e.removeClass(a)})})}function openRegisterForm(){$(".register-opener").on("click",function(){var e=$(".wrapper"),a="has-open-member",s=$('[data-toggler="auth"]'),o=$('[data-toggler="register"]'),t=$('[data-toggle="auth"]'),n=$('[data-toggle="register"]');s.removeClass("is-current"),t.removeClass("is-open"),o.addClass("is-current"),n.addClass("is-open"),e.hasClass(a)?e.removeClass(a):e.addClass(a),$(".member").on("click",function(s){$(s.target).closest(".bg-closer, .member-inner").length||e.hasClass(a)&&e.removeClass(a)})})}function hideHeaderAfterScrollDown(){var e,a=document.documentElement,s=document.querySelector("header"),o=(document.querySelector("main"),"is-hide"),t=window.scrollY||a.scrollTop,n=0,r=0,i=104;s.querySelector(".mail-confirm")&&s.classList.add("has-notify"),window.addEventListener("scroll",function(){(e=window.scrollY||a.scrollTop)>t?n="down":e<t&&(n="up"),n!==r&&function(e,a){"down"===e&&a>i?(s.classList.add(o),r=e):"up"===e&&(s.classList.remove(o),r=e)}(n,e),t=e})}function openNavbar(){$(".burger").on("click",function(){var e=$(".wrapper"),a="has-open-navbar";e.hasClass(a)?e.removeClass(a):e.addClass(a),e.on("click",function(s){$(s.target).closest(".burger, .navbar, .navbar-closer, .catalog, .member, .games").length||e.hasClass(a)&&e.removeClass(a)})})}function closeNavbar(){$(".navbar-closer").on("click",function(){var e=$(".wrapper");e.hasClass("has-open-navbar")&&e.removeClass("has-open-navbar")})}function backToNavbar(){$(".catalog-back-btn").on("click",function(){var e=$(".catalog");e.hasClass("is-open-mob")&&e.removeClass("is-open-mob")})}function toggleCatalogCol(){$(".js-catalog-tab").click(function(e){e.preventDefault();var a=$(this).attr("data-toggler"),s=$('[data-toggle="'+a+'"]');$(".js-catalog-tab.is-current").removeClass("is-current"),$(this).addClass("is-current"),$(".js-catalog-col.is-open").removeClass("is-open"),s.addClass("is-open")})}function shadowTabs(){var e=$(".js-nano");e.length&&e.each(function(){$(this).on("update",function(e,a){"down"==a.direction?$(this).addClass("is-scrolling"):0==a.position&&$(this).removeClass("is-scrolling")})})}function transformGamesCloser(){$(".games").on("scroll",function(){$(this).scrollTop()>0?$(".circle-bg-closer").addClass("is-transformed"):$(".circle-bg-closer").removeClass("is-transformed")})}function stickGamesTabs(){$(".games").on("scroll",function(){$(this).scrollTop()>=$(".games .tabs").offset().top?$(".games .tabs-wrap").addClass("is-fixed"):$(".games .tabs-wrap").removeClass("is-fixed")})}function openBreadcrumbsList(){$(".breadcrumbs-opener").on("click",function(){var e=$(".wrapper"),a="has-open-breadcrumbs";e.hasClass(a)?e.removeClass(a):e.addClass(a),e.on("click",function(s){$(s.target).closest(".breadcrumbs-opener, .breadcrumbs").length||e.hasClass(a)&&e.removeClass(a)})})}function openAvatarForm(){$(".js-avatar-opener, .profile-user-changer").on("click",function(){var e=$(".wrapper"),a="has-open-avatar";e.hasClass(a)?e.removeClass(a):e.addClass(a),$(".avatar").on("click",function(s){$(s.target).closest(".bg-closer, .avatar-inner").length||e.hasClass(a)&&e.removeClass(a)})})}function closeAvatarForm(){$(".bg-closer").on("click",function(){var e=$(".wrapper");e.hasClass("has-open-avatar")&&e.removeClass("has-open-avatar")})}function showUploadedFileText(){$(".uploader-field").change(function(e){var a,s,o=window.URL||window.webkitURL;(a=this.files[0])?((s=new Image).onload=function(){(this.width||this.height)<180?($(".uploader-field").value="",$(".uploader-field").parent(".uploader").removeClass("is-loaded")):$(".uploader-field").parent(".uploader").addClass("is-loaded").find(".uploader-file").text(a.name)},s.src=o.createObjectURL(a)):$(".uploader-field").parent(".uploader").removeClass("is-loaded")})}function openPassChangeForm(){$(".js-pass-changer").on("click",function(){var e=$(".wrapper"),a="has-open-pass-change";e.hasClass(a)?e.removeClass(a):e.addClass(a),$(".pass-change").on("click",function(s){$(s.target).closest(".bg-closer, .pass-change-inner").length||e.hasClass(a)&&e.removeClass(a)})})}function closePassChangeForm(){$(".bg-closer").on("click",function(){var e=$(".wrapper");e.hasClass("has-open-pass-change")&&e.removeClass("has-open-pass-change")})}function initCategoriesSlider(){if($(".categories-swiper-container").length){var e=!1,a=!1,s="",o=1139;t(window.innerWidth),window.addEventListener("resize",function(){t(window.innerWidth)})}function t(t){var n=$(".categories-swiper-container"),r=$(".categories-swiper-wrapper"),i=$(".categories-swiper-slide");t<=o&&!a?(e=!1,a=!0,n.addClass("swiper-container"),r.addClass("swiper-wrapper"),i.addClass("swiper-slide"),i.length>=8?(r.removeClass("nowrap"),s=new Swiper(".categories-swiper-container",{slidesPerView:"auto",freeMode:!0,slidesPerColumn:2})):(r.addClass("nowrap"),s=new Swiper(".categories-swiper-container",{slidesPerView:"auto",freeMode:!0}))):t>=o&&!e&&(e=!0,a=!1,n.removeClass("swiper-container"),r.removeClass("swiper-wrapper"),i.removeClass("swiper-slide"),"object"==typeof s&&s.destroy())}}function openNotWorking(){$(".js-not-working").on("click",function(){var e=$(".wrapper"),a="has-open-not-working";e.hasClass(a)?e.removeClass(a):e.addClass(a),$(".not-working").on("click",function(s){$(s.target).closest(".bg-closer, .not-working-inner").length||e.hasClass(a)&&e.removeClass(a)})})}function closeNotWorking(){$(".bg-closer").on("click",function(){var e=$(".wrapper");e.hasClass("has-open-not-working")&&e.removeClass("has-open-not-working")})}function initSliderRangeGames(){if($(".game-swiper-container").length)if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB10|IEMobile|Opera Mini/.test(navigator.userAgent))new Swiper(".game-swiper-container",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},freeMode:!0,spaceBetween:20,slidesPerView:"auto"});else new Swiper(".game-swiper-container",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{320:{freeMode:!0,spaceBetween:20,slidesPerView:2.2},1024:{freeMode:!1,spaceBetween:28,slidesPerView:5,slidesPerGroup:4,centeredSlides:!0,centeredSlidesBounds:!0}}})}function toggleGameBl(){var e=$(".game-toggle-bl"),a=$('[data-toggle="feedback"]');a.hide(),$(".game-tab").on("click",function(a){var s=$(this).data("toggler"),o=$(".game-tab:not(.is-current)").offset().left+$(".game-tab:not(.is-current)").width()>$(window).width(),t=$(".game-tab:not(.is-current)").offset().left<0,n=$(".game-tab:not(.is-current)").closest(".game-tab");o?n.animate({scrollLeft:$(".game-tab:not(.is-current)").closest(".game-tab").scrollLeft()+$(".game-tab:not(.is-current)").offset().left-10},200):t&&n.animate({scrollLeft:$(".game-tab:not(.is-current)").closest(".game-tab").scrollLeft()+$(".game-tab:not(.is-current)").offset().left-10},200),$(".game-tab.is-current").removeClass("is-current"),$(this).addClass("is-current"),e.hide().filter(function(e){return $(this).data("toggle")===s}).show(),$(".game-toggle-zone").hide(),$(".headline, .about-headline").hide()}),$(".game-tab-all").click(function(s){e.show(),a.hide(),$(window).width()>1024&&$(".game-toggle-zone").show(),$(".headline, .about-headline").show()}),$(".game-review-link, .js-go-feed").click(function(s){$([document.documentElement,document.body]).animate({scrollTop:$(".game-tabs-container").offset().top},300),e.hide(),$(".game-toggle-zone").hide(),$(".game-tab.is-current").removeClass("is-current"),$('[data-toggler="feedback"]').addClass("is-current"),a.show()})}function tabScroll(){$(".game-tab").on("click",function(){var e=$(this).offset().left+$(this).width()>$(window).width(),a=$(this).offset().left<0,s=$(this).closest(".game-tabs");e?s.animate({scrollLeft:$(this).closest(".game-tabs").scrollLeft()+$(this).offset().left-10},200):a&&s.animate({scrollLeft:$(this).closest(".game-tabs").scrollLeft()+$(this).offset().left-10},200)})}function stickBanner(){$(".sticky-bl").length&&($(".sticky-bl").sticky({topSpacing:0,responsiveWidth:!1}),$(document).on("scroll",function(){$(this).scrollTop()>=$lastEl.offset().top?($(".sticky-bl").addClass("is-stopped"),$(".sticky-bl").unstick()):($(".sticky-bl").removeClass("is-stopped"),$(".sticky-bl").sticky({topSpacing:10}))}))}function initProgressBar(){$(".progressbar").length&&document.contains(document.querySelector(".progressbar"))&&window.addEventListener("scroll",function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;document.querySelector(".progressbar").style.width=e+"%"})}function initBlogCarousel(){if($(".carousel").length)new Swiper(".carousel",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},mousewheel:!1,slidesPerView:1})}function stickBlogHeadingBtn(){var e=$(".sticky-btn");if(e.length){var a=!1,s=!1,o=1320,t=$(window).innerWidth();$target.length&&(n(t),$(window).on("resize",function(){n($(window).innerWidth())}))}function n(t){t<o&&!s?(a=!1,s=!0,e.unstick(),$(window).on("scroll",function(){$(this).scrollTop()>300?e.addClass("shown"):e.removeClass("shown")})):t>=o&&!a&&(a=!0,s=!1,e.sticky({topSpacing:70,responsiveWidth:!1}))}}function goBackToBlogTitle(){$(".sticky-btn").click(function(e){console.log("test"),$([document.documentElement,document.body]).animate({scrollTop:$("main").offset().top},300)})}function scrollDownToBlogFeed(){$(".comments-redirect").click(function(e){$([document.documentElement,document.body]).animate({scrollTop:$(".blog-feed").offset().top},300)})}function initTagsSlider(){if($(".tags").length){var e=!1,a=!1,s="",o=1024;t(window.innerWidth),window.addEventListener("resize",function(){t(window.innerWidth)})}function t(t){var n=$(".tags-nav"),r=$(".tags-list"),i=$(".tags-item");t<=o&&!a?(e=!1,a=!0,n.addClass("swiper-container"),r.addClass("swiper-wrapper"),i.addClass("swiper-slide"),s=new Swiper(".tags-nav",{slidesPerView:"auto",freeMode:!0,slidesPerColumn:2})):t>=o&&!e&&(e=!0,a=!1,n.removeClass("swiper-container"),r.removeClass("swiper-wrapper"),i.removeClass("swiper-slide"),"object"==typeof s&&s.destroy())}}function gamePop(){function e(){var e,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB10|IEMobile|Opera Mini/.test(navigator.userAgent),s=(e=$(window).width()<1025||a?document.querySelector(".mob-game"):document.querySelector(".game-frame-box iframe")).requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;s&&s.call(e)}$(".js-refresh-iframe").on("click",function(){var e=$(".game-frame-box"),a=e.find("iframe").clone();e.find("iframe").remove(),e.append(a)}),$(".js-go-fullscreen").on("click",function(){e()}),$("body").on("click",".js-game-back",function(e){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),$(".mob-game").hide(),$("html").hasClass("is-locked")?$("html").removeClass("is-locked"):$("html").hasClass("is-horizontal-locked")&&$("html").removeClass("is-horizontal-locked")}),$(".js-start-game").on("click",function(){var a=$(this);$(".iframe-buttons").show();var s=a.data("iframe-width"),o=a.data("iframe-height"),t=a.data("iframe-src"),n=a.data("iframe-styles"),r=a.attr("alt"),i=1==a.data("sandbox")?' sandbox="allow-same-origin allow-scripts allow-modals" ':"",l=a.data("fullscreen"),c=a.data("target-blank"),d=a.data("horizontal"),m=/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB10|IEMobile|Opera Mini/.test(navigator.userAgent);if(1!=c)if($(window).width()<1025||m){if($(".mob-game").length)$(".mob-game").show(),$(".back-btn").show();else{var u='<div class=\'mob-game\'><div class="back-btn js-game-back"><i class="icon-arrow-left"></i></div><iframe '+i+" src='"+t+"' width='100%' height='100%' marginwidth='0' marginheight='0' frameborder='0' allow='autoplay;fullscreen' class='mob-game-frame' allowfullscreen></iframe></div></div>";$("body").append(u),a.text(mailLang.сontinue_game)}1==d?($(".mob-game").addClass("has-horizontal-iframe"),function(){function e(e,a){e>a&&($(".mob-game").removeClass("is-vertical"),$(".mob-game").addClass("is-horizontal"),$("body").off("touchmove",".mob-game.has-horizontal-iframe .back-btn"),$(".mob-game.has-horizontal-iframe .back-btn").css("left",""),$("body").on("touchmove",".mob-game.has-horizontal-iframe .back-btn",function(e){var a=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];a.pageY>20&&a.pageY+60<$(window).height()&&$(".back-btn").css("top",Math.round(a.pageY))}),$(".mob-game").hasClass("required-rotate")&&$(".mob-game").removeClass("required-rotate")),e<a&&($(".mob-game").removeClass("is-horizontal"),$(".mob-game").addClass("is-vertical"),$("body").off("touchmove",".mob-game.has-horizontal-iframe .back-btn"),$(".mob-game.has-horizontal-iframe .back-btn").css("top",""),$("body").on("touchmove",".mob-game.has-horizontal-iframe .back-btn",function(e){var a=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];a.pageX>20&&a.pageX+60<$(window).width()&&$(".back-btn").css("left",Math.round(a.pageX))}),$(".mob-game").hasClass("required-rotate")||$(".mob-game").addClass("required-rotate"))}e($(window).innerWidth(),$(window).innerHeight()),$(window).on("resize",function(){e($(window).innerWidth(),$(window).innerHeight())})}(),$("html").addClass("is-horizontal-locked"),e(),screen.orientation?screen.orientation.lock("landscape"):screen.msLockOrientation?screen.msLockOrientation.lock("landscape"):screen.mozLockOrientation?screen.mozLockOrientation.lock("landscape"):($(".mob-game").removeClass("has-horizontal-iframe"),$(".mob-game").addClass("has-default-iframe"),$(".mob-game").addClass("required-rotate"),$(".mob-game").hasClass("has-default-iframe")&&$("body").on("touchmove",".back-btn",function(e){var a=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];a.pageY>20&&a.pageY+60<$(window).height()&&$(".back-btn").css("top",Math.round(a.pageY))}))):($(".mob-game").addClass("has-default-iframe"),$(".mob-game").hasClass("has-default-iframe")&&$("body").on("touchmove",".back-btn",function(e){var a=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];a.pageY>20&&a.pageY+60<$(window).height()&&$(".back-btn").css("top",Math.round(a.pageY))}),$("html").addClass("is-locked"),e())}else{u="<iframe "+i+" src='"+t+"' width='"+s+"' height='"+o+"' marginwidth='0' marginheight='0' frameborder='0' id='gameIframe' allow='autoplay;fullscreen' allowfullscreen style='"+n+"'></iframe>";var h=$(".game-frame-box");l&&h.addClass("canFullscreen"),"100%"==s&&h.attr("style","min-width: 100%; overflow: hidden"),h.show(),h.append(u),a.closest(".game-frame").addClass("is-loaded"),$(".game-frame-inner").hide()}else!function(e){var a=e.width,s=e.height,o=e.src,t=e.alt,n=(e.styles,void 0!==window.screenLeft?window.screenLeft:window.screenX),r=void 0!==window.screenTop?window.screenTop:window.screenY,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,l=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,c=a/window.screen.availWidth,d=(i-a)/2/c+n,m=(l-s)/2/c+r,u=window.open(o,t,"\n      scrollbars=yes,\n      width="+i/c+",\n      height="+l/c+",\n      top="+m+",\n      left="+d+"\n    ");window.focus&&u.focus()}({width:s,height:o,src:t,alt:r,styles:n})})}$(function(){initCustomScrollBar(),openSearchForm(),closeSearchForm(),showSearchCleaner(),clearSearchField(),openCatalogByHover(),closeCatalog(),openGamesBl(),closeGamesBl(),toggleGamesBl(),openMemberForm(),closeMemberForm(),toggleMemberForm(),focusOnField(),fixLabel(),showPassword(),openRecoveryForm(),closeRecoveryForm(),backToMemberFrom(),showThumbPreview(),drawChart(),dropLangsList(),openFeedbackForm(),closeFeedbackForm(),openAuthForm(),openRegisterForm(),hideHeaderAfterScrollDown(),openNavbar(),closeNavbar(),openCatalogByClick(),backToNavbar(),toggleCatalogCol(),shadowTabs(),transformGamesCloser(),stickGamesTabs(),openBreadcrumbsList(),openAvatarForm(),closeAvatarForm(),showUploadedFileText(),openPassChangeForm(),closePassChangeForm(),initCategoriesSlider(),openNotWorking(),closeNotWorking(),initSliderRangeGames(),toggleGameBl(),tabScroll(),stickBanner(),initProgressBar(),initBlogCarousel(),stickBlogHeadingBtn(),goBackToBlogTitle(),scrollDownToBlogFeed(),initTagsSlider(),gamePop()});var mobile=!1;function isIE8orlower(){var e="0",a=getInternetExplorerVersion();return a>-1&&(e=a>=9?0:1),e}function getInternetExplorerVersion(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var a=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(a)&&(e=parseFloat(RegExp.$1))}return e}function showAlert(e,a){var s="smallbox";if(a&&(s="messagebox"),0==isIE8orlower()){var o=document.createElement("audio");navigator.userAgent.match("Firefox/")?o.setAttribute("src","/static/sound/"+s+".ogg"):o.setAttribute("src","/static/sound/"+s+".mp3"),o.addEventListener("load",function(){o.play()},!0),o.pause(),o.play()}setTimeout(function(){a?($(".success-bl").css({opacity:"1",visibility:"visible","z-index":"1000"}),$(".info-bl-text").html(e)):($(".error-bl").css({opacity:"1",visibility:"visible","z-index":"1000"}),$(".info-bl-text").html(e))},300),setTimeout(function(){$(".success-bl").css({opacity:"0",visibility:"hidden"}),$(".error-bl").css({opacity:"0",visibility:"hidden"})},5e3)}/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB10|IEMobile|Opera Mini/.test(navigator.userAgent)&&(mobile=!0,$("html").addClass("mobile")),$(document).ready(function(){$(".js-fav").on("click",function(e){e.preventDefault(),$(this).hasClass("isActive")?($(this).find("i").text("В избранное"),$(document).width()>991?showAlert("Удалено из избранного",!1):showAlert("Игра удалена из избранного",!1),$(this).removeClass("isActive")):($(this).find("i").text("В избранном"),$(document).width()>991?showAlert("Добавлено в избранное",!0):showAlert("Игра добавлена в избранное",!0),$(this).addClass("isActive"))}),$(".js-search-input").autocomplete({serviceUrl:mailLang.route_search_ajax,type:"POST",dataType:"json",minChars:3,showNoSuggestionNotice:!0,noSuggestionNotice:mailLang.noSuggestionNotice,onSelect:function(e){window.location.href=e.data.url},formatResult:function(e,a){var s=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g"),o="("+a.replace(s,"\\$1")+")";return"<span class='searchitem__item'>"+(e.data.image?"<img class='searchitem__img' src='"+e.data.image+"'>":"")+"<span class='searchitem__name'>"+e.value.replace(new RegExp(o,"gi"),"<strong>$1</strong>")+"</span><span class='searchitem__info'>"+e.data.description+"</span></span>"},beforeRender:function(e,a){$(".js-search-top").hide(),$(".requests-title").hide(),a.length>2&&$(e).find(".autocomplete-suggestion").last().after('<button type="button" onclick="$(\'.search-submitter\').click();" class="searchitem__all button">'+mailLang.show_all+"</button>")},onHide:function(){$(".js-search-top").show(),$(".requests-title").show()}}),$("body").on("click",".js-search-top",function(e){$(".js-search-input").val($(this).find("span").text()).addClass("not-empty").addClass("is-not-empty").autocomplete("onValueChange")}),$(".wrapper").click(function(e){$(e.target).closest(".autocomplete-suggestions").length||($(".autocomplete-suggestions").hide(),$(".js-search-top").show(),$(".requests-title").show())}),$(".search-closer").on("click",function(){$(".autocomplete-suggestions").hide(),$(".js-search-top").show(),$(".requests-title").show()}),$(document).on("click","button[type=submit], input[type=submit]",function(e){$(this).closest("form").find("[required]:visible").addClass("required")}),$(document).on("submit","form[data-success-alert]",function(e){if(!0===$(this).data("check-passwords")&&$(this).find("[name=newpassword]").val()!==$(this).find("[name=repeatpassword]").val())return $(this).find("[name=repeatpassword]").val(""),!1;showAlert($(this).data("success-alert"),!0),e.preventDefault()}),$(document).on("click",".js-alert-close",function(e){e.preventDefault(),$(this).closest(".alert").removeClass("isActive"),setTimeout(function(){$(this).closest(".alert").remove()},200)}),$(document).on("submit","form[data-success-text]",function(e){if(!0===$(this).data("check-passwords")&&$(this).find("[name=newpassword]").val()!==$(this).find("[name=repeatpassword]").val())return $(this).find("[name=repeatpassword]").val(""),!1;showAlert($(this).data("success-text"),!0),e.preventDefault()}),$("input[required], text[required]").on("keyup",function(){tmpval=$(this).val(),""===tmpval?$(this).removeClass("not-empty"):$(this).addClass("not-empty")}),document.addEventListener("invalid",function(e){e.preventDefault()},!0),$(".show-more-btn").on("click",function(){$(this).parents(".categories-second").addClass("isVisible"),$(this).parents(".categories-swiper-container").addClass("isVisible"),$(this).parents(".categories-carousel").addClass("isVisible"),$(this).parents(".categories").addClass("isVisible"),$(this).parents(".has-btn").hide()}),$(".info-bl-closer").on("click",function(){$(".success-bl").css({opacity:"0",visibility:"hidden"}),$(".error-bl").css({opacity:"0",visibility:"hidden"})})});